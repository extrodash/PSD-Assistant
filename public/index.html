<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPS AI Assistant</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify/dist/purify.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>SPS AI Assistant</h1>
            <div class="header-controls">
                <div class="theme-toggle-group">
    <label for="theme-toggle" class="theme-toggle-label" aria-label="Toggle theme">
        <svg class="theme-icon-sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20px" height="20px"><path d="M12 9c-1.65 0-3 1.35-3 3s1.35 3 3 3 3-1.35 3-3-1.35-3-3-3zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-10c-.55 0-1 .45-1 1v1c0 .55.45 1 1 1s1-.45 1-1V8c0-.55-.45-1-1-1zm-5.66 2.34l.71.71c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41l-.71-.71c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41zm11.32 0c.39-.39.39-1.02 0-1.41l-.71-.71c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l.71.71c.39.39 1.02.39 1.41 0zM12 5c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1s-1 .45-1 1v1c0 .55.45 1 1 1zm-5.66 13.66l.71.71c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41l-.71-.71c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41zm11.32 0c.39-.39.39-1.02 0-1.41l-.71-.71c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l.71.71c.39.39 1.02.39 1.41 0zM4 13c-.55 0-1 .45-1 1s.45 1 1 1h1c.55 0 1-.45 1-1s-.45-1-1-1H4zm15 0c-.55 0-1 .45-1 1s.45 1 1 1h1c.55 0 1-.45 1-1s-.45-1-1-1h-1z"/></svg>
        <svg class="theme-icon-moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20px" height="20px"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.62-.14 2.37-.38-.3-.24-.57-.53-.8-.85-.83-1.17-1.22-2.57-1.01-4.03.22-1.57 1.13-2.91 2.48-3.81.35-.23.72-.43 1.1-.59C15.76 4.48 13.97 3 12 3zm1.95 9.02c-.19.04-.38.06-.58.06-1.93 0-3.5-1.57-3.5-3.5 0-.9.37-1.71 1-2.33-.12-.03-.23-.06-.35-.08C8.09 6.48 6 9.04 6 12c0 3.31 2.69 6 6 6 .89 0 1.73-.2 2.5-.56-.18-.13-.35-.27-.52-.43-.9-.9-1.4-2.09-1.48-3.3.01-.2.03-.39.05-.59z"/></svg>
    </label>
    <input type="checkbox" id="theme-toggle" class="theme-toggle-checkbox" />
</div>
                <div class="menu">
                    <button id="new-chat-button">New Chat</button>
                    <select id="chat-threads-menu"></select>
                </div>
            </div>
        </header>

        <details class="settings-section">
            <summary>Settings & Prompts</summary>
            <div class="settings-content">
                <div class="prompt-editor">
                    <label for="foundational-prompt">Foundational Personality Prompt</label>
                    <textarea id="foundational-prompt" rows="4" placeholder="Enter foundational prompt..."></textarea>
                </div>
                <div class="prompt-editor">
                    <label for="additional-reference">Optional Reference Document</label>
                    <textarea id="additional-reference" rows="4" placeholder="Paste a doc or instructions here..."></textarea>
                </div>
                <div class="model-picker">
                    <label for="model-select">Choose Model:</label>
                    <select id="model-select">
                        <option value="gpt-3.5-turbo">GPT-3.5 Turbo (Cheap)</option>
                        <option value="gpt-4o">GPT-4o (Best)</option>
                    </select>
                </div>
                <div class="mode-picker">
                    <label for="mode-select">Chat Mode:</label>
                    <select id="mode-select"></select>
                </div>
                <div id="custom-prompt-container" class="prompt-editor" style="display: none;">
                    <label for="custom-prompt">Custom Prompt</label>
                    <textarea id="custom-prompt" rows="4" placeholder="Enter your custom system prompt..."></textarea>
                </div>
                <div id="mode-instruction-container">
                    <p id="mode-instruction"></p>
                </div>
                 <div class="summary-section">
                    <button id="summarize-chat-button">Summarize This Chat</button>
                    <div id="chat-summary" class="summary-display"></div>
                </div>
            </div>
        </details>

        <div class="chat-history" id="chat-history">
            </div>

        <div class="input-bar">
            <textarea id="user-input" placeholder="Type your message..." rows="1"></textarea>
            <button id="send-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-up-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="16 12 12 8 8 12"></polyline><line x1="12" y1="16" x2="12" y2="8"></line></svg>
            </button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>